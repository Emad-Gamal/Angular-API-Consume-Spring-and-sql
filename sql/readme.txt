The relationship between user and product is ManyToMany relationship thats why there is bridge table user_product
has columns userId and productId as foreign keys to fulfill the relationship


The execution query time is based on autogenerated data for 1000 product , 100 user , 1000 user_product

#how many product is used by each user
SELECT u.id userId, u.firstName , u.NAME lastName, COUNT(*) AS procutsByUsercCount
FROM user_product AS pu
JOIN user AS u ON u.id = pu.userId
JOIN product AS p ON p.id = pu.productId
GROUP BY pu.userId;

#EXECUTION TIME DETAILS : /* Affected rows: 0  Found rows: 100  Warnings: 0  Duration for 1 query: 0.015 sec. */


#Which user to which product is related
SELECT  u.id UserID, u.firstName , u.NAME UserLastName, p.id AS productId, p.NAME ProductName, p.`type` ProductType
FROM user_product AS pu
JOIN user AS u ON u.id = pu.userId
JOIN product AS p ON p.id = pu.productId;
#EXECUTION TIME DETAILS : /* Affected rows: 0  Found rows: 1,003  Warnings: 0  Duration for 1 query: 0.000 sec. */


SELECT * FROM CustomersCount as cc WHERE cc.userProductsCount = (SELECT max(userProductsCount) FROM CustomersCount);
/* Affected rows: 0  Found rows: 1  Warnings: 0  Duration for 1 query: 0.016 sec. */
SELECT * FROM CustomersCount as cc WHERE cc.userProductsCount = (SELECT min(userProductsCount) FROM CustomersCount);
/* Affected rows: 0  Found rows: 99  Warnings: 0  Duration for 1 query: 0.016 sec. */

The last 2 queries time is after creating the CustomersCount view 

for the execution plans we use the keyword Explain to get the plain details